# 斗地主命令行版本

发布时间：2019_02_07 21:26

我的父亲最近痴迷于斗地主。。。。
所以我就对斗地主这个游戏进行了深入的思考

1. 游戏硬件需求
    
    * 3个玩家
    * 一副扑克牌
     
2. 游戏需求（requirements）

    1. 洗牌
    2. 码牌
    3. 发牌
    
    等等。。。好像有点不对劲233
    
    1. 游戏开始，洗牌，给3位玩家分别发17张牌（共51张）。
    2. 抢地主，如果没有人抢，重复步骤1。
    如果重复3次，则判定为“流局”，游戏结束。
    如果超过一个人抢地主，那么就对第一个提出抢地主的玩家进行再次询问，
    如果其放弃抢地主，那么地主资格默认归下一个抢地主的玩家。也就是说，
    最多只会询问3个玩家共4次。抢完地主后，发牌步骤中剩下的3张牌归地主，
    并公示。游戏分为两派并按规定出牌（后面有介绍），
    地主先出完牌地主胜，任一农民出完则两农民获胜。
    3. 出牌规则中，首先由地主出牌，当任何一人接着上家出牌时，必须保证
    比上家的牌大。这显而易见。如果不想出牌或者没有比上家牌大的时候，
    此玩家则可以声明“不要”来跳过自己的出牌回合。
    当一位玩家出牌而其他两人不要时，此玩家可以获得一次任意出牌权（类似于
    地主的首次出牌一样），没有上家，因此可以随意出牌。
    4. 牌的大小：王炸（小王+大王）最大，其次是炸（4张相同牌）。这两种牌可以管
    任意类型的牌，而其它的类型（单张，对牌，三张，顺子，连对，飞机，三带一，三带一对，四带二，飞机带翅膀等等）
    只能管自己类型的，不能跨类型管。
    5. 只有3种情况导致游戏结束：（1）流局，（2）地主出完，（3）一位农民出完
    
3. 游戏架构设计

    1. 顶层架构设计
    
        没啥顶层架构，就基于面向对象的方式组织对象及其行为
        
    2. 数据架构设计
    
        没啥数据架构，因为懒得用数据库进行持久化存储，也不做积分系统和日志啥的
        
    3. 网络架构设计

        没啥网络架构，这个是单机程序不联网。啥？你问我3个玩家？一个人精分3个人就行Orz，简单明了
        
    4. 技术选型
    
        就纯Python3.2+就行，懒得做兼容，也不用打包发布，自己玩玩整这么正式干啥。。。
        
    5. 细分架构设计
    
        1. 我是想，卡组(`Deck`)里面一共54张牌(`Card`)，每张牌是一个对象，这个对象有两个属性：
        (1)`花色(suit)`,(2)`大小(rank)`。借鉴数据库，这东西没方法，注意，没方法，想要使用
        这个东西就自己指过去用，因为我判断不了两张牌的数学上的大小（没想好），所以不要用魔术方法，就
        老老实实写东西就行，少封装，这个地方强耦合。
        
        2. 然后一些卡的组合成为卡组(`CardGroup`)，卡组是，额，一些卡的组合。这些卡就可以用来互相
        比较，判断大小。比如，仨二带俩三(222+33)比三张八带两张五(888+55)大，但是不同类型的就不能比较了，
        除了王炸和炸参与的比较。
        
        3. 出牌中，卡组的类型分为4种，王炸(`two_joker`)，重复牌(`repeated_cards`)，连续牌(`cascaded_cards`)和
        带牌(`attached_cards`)。具体的还是看`CardGroup`的程序注释吧，我懒得写

4. 游戏开发

    就各种写，黑盒白盒测试，然后快速发布，期间参杂模块测试和系统测试
   
5. 游戏发布

    过年了，就这样收工吧
        